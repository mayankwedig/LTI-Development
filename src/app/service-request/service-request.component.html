<div id="main-wrapper">
  <app-header></app-header>
  <app-side-bar [displayUserInfo]="dispString"></app-side-bar>
  <div id="content-wrapper">
    <div class="page-heading">SERVICE REQUEST</div>
    <div class="billing-sec complaints-page">
      <div class="row margin_top20">
        <div class="col-sm-12">
          <div class="service-box" *ngIf="showTrackingNo == true">
            <div class="panel-body">
              <div class="title">service registration</div>
              <div class="req-success-msg">
                Thank You For Registering Your Request.
              </div>
              <div class="req-number">
                Your request no. is: <span>{{ trackingNo }}</span>
              </div>
              <div class="team-contact">Our Team Will Contact You Shortly.</div>
              <div class="text-center padding_top50">
                Page will be redirect automatically after 30 second.
              </div>
            </div>
          </div>

          <div
            class="panel-body"
            *ngIf="
              hideServiceRequestDetailsFrm == true && showTrackingNo == false
            "
          >
            <div class="row">
              <div
                class="col-sm-6 col-sm-offset-3 profile-right-content padding_top50"
              >
                <form
                  class="form top-label-form"
                  [formGroup]="selectServiceRequestFrm"
                  (ngSubmit)="submitSelectServiceRequestFrm()"
                >
                  <div class="row">
                    <div class="col-xs-12">
                      <div class="form-group">
                        <label>Account Number*</label>
                        <select
                          required
                          *ngIf="!userAccountsLoder && userAccounts.length > 0"
                          formControlName="accountNumber"
                          name="accountNumber"
                          (change)="
                            showAccountDetails(
                              selectServiceRequestFrm.value.accountNumber
                            )
                          "
                          class="form-control"
                        >
                          <option value="" selected
                            >Select Account Number</option
                          >
                          <option
                            value="{{ user.account_number }}"
                            *ngFor="let user of userAccounts"
                            >{{ user.account_number }}</option
                          >
                        </select>
                        <div *ngIf="userAccountsLoder">Loding...</div>
                        <div
                          *ngIf="
                            fSelectRequ.accountNumber.touched &&
                            fSelectRequ.accountNumber.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="fSelectRequ.accountNumber.errors?.required"
                            >Account Number is required.</span
                          >
                        </div>
                      </div>
                    </div>
                    <div class="col-xs-12">
                      <div class="form-group">
                        <label>Service Request Type*</label>
                        <select
                          *ngIf="
                            !serviceRequestTypeLoder &&
                            serviceRequestTypes.length > 0
                          "
                          required
                          formControlName="serviceRequestType"
                          name="serviceRequestType"
                          class="form-control"
                          (change)="
                            initServiceRequestFrm(
                              selectServiceRequestFrm.value.serviceRequestType
                            )
                          "
                        >
                          <option value="" selected>Select Request Type</option>
                          <option
                            value="{{ serReqType.request_type }}"
                            *ngFor="let serReqType of serviceRequestTypes"
                            >{{ serReqType.request_type }}</option
                          >
                        </select>
                        <div *ngIf="serviceRequestTypeLoder">Loding...</div>
                        <div
                          *ngIf="
                            fSelectRequ.serviceRequestType.touched &&
                            fSelectRequ.serviceRequestType.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="
                              fSelectRequ.serviceRequestType.errors?.required
                            "
                            >Request Type is required.</span
                          >
                        </div>
                      </div>
                    </div>

                    <button
                      class="btn btn-primary submit-btn full-btn"
                      type="submit"
                      [disabled]="!selectServiceRequestFrm.valid"
                    >
                      Next <i class="fa fa-forward" aria-hidden="true"></i>
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div
            class="panel-body"
            *ngIf="
              hideServiceRequestDetailsFrm == false && showTrackingNo == false
            "
          >
            <div class="form-holder">
              <form
                class="top-label-form"
                [formGroup]="requestServicesFrm"
                (ngSubmit)="submitServiceRequestFrm()"
              >
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail1">Account Number</label>
                      <select
                        required
                        *ngIf="!userAccountsLoder && userAccounts.length > 0"
                        formControlName="accountNumber"
                        name="accountNumber"
                        (change)="
                          showAccountDetails(
                            requestServicesFrm.value.accountNumber
                          )
                        "
                        class="form-control"
                      >
                        <option value="" selected>Select Account Number</option>
                        <option
                          value="{{ user.account_number }}"
                          *ngFor="let user of userAccounts"
                          >{{ user.account_number }}</option
                        >
                      </select>
                      <div *ngIf="userAccountsLoder">Loding...</div>
                      <div
                        *ngIf="
                          f.accountNumber.touched && f.accountNumber.invalid
                        "
                      >
                        <span
                          class="error-msg"
                          *ngIf="f.accountNumber.errors?.required"
                          >Account Number is required.</span
                        >
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail1"
                        >Service Request Type</label
                      >
                      <select
                        *ngIf="
                          !serviceRequestTypeLoder &&
                          serviceRequestTypes.length > 0
                        "
                        required
                        formControlName="serviceRequestType"
                        name="serviceRequestType"
                        class="form-control"
                        (change)="
                          initServiceRequestFrm(
                            requestServicesFrm.value.serviceRequestType
                          )
                        "
                      >
                        <option value="" selected>Select Request Type</option>
                        <option
                          value="{{ serReqType.request_type }}"
                          *ngFor="let serReqType of serviceRequestTypes"
                          >{{ serReqType.request_type }}</option
                        >
                      </select>
                      <div *ngIf="serviceRequestTypeLoder">Loding...</div>
                      <div
                        *ngIf="
                          f.serviceRequestType.touched &&
                          f.serviceRequestType.invalid
                        "
                      >
                        <span
                          class="error-msg"
                          *ngIf="f.serviceRequestType.errors?.required"
                          >Request Type is required.</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div class="border-block"></div>
                <div class="heading-field">Consumer Information</div>
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail1" class="disabled"
                        >Name</label
                      >
                      <input
                        type="text"
                        required
                        formControlName="name"
                        name="name"
                        type="text"
                        class="form-control"
                        id="exampleInputEmail1"
                        placeholder="Name"
                      />
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail2" class="disabled"
                        >Supply Type</label
                      >
                      <input
                        type="text"
                        required
                        formControlName="supplyType"
                        name="supplyType"
                        class="form-control"
                        id="exampleInputEmail2"
                        placeholder="Supply Type"
                      />
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail3" class="disabled"
                        >Installation Address</label
                      >
                      <input
                        type="text"
                        required
                        formControlName="installationAddress"
                        name="installationAddress"
                        class="form-control"
                        id="exampleInputEmail3"
                        placeholder="Installation Address"
                      />
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail4" class="disabled"
                        >Mobile Number</label
                      >
                      <input
                        type="text"
                        required
                        formControlName="mobileNumber"
                        name="mobileNumber"
                        class="form-control"
                        id="exampleInputEmail4"
                        placeholder="Mobile Number"
                      />
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail5" class="disabled"
                        >Current Load</label
                      >
                      <input
                        type="text"
                        required
                        formControlName="currentLoad"
                        name="currentLoad"
                        class="form-control"
                        id="exampleInputEmail5"
                        placeholder="Current Load"
                      />
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-xs-12">
                    <div class="form-group">
                      <label for="exampleInputEmail6" class="disabled"
                        >Email ID</label
                      >
                      <input
                        type="email"
                        required
                        formControlName="emailId"
                        name="emailId"
                        class="form-control"
                        id="exampleInputEmail6"
                        placeholder="Email ID"
                      />
                    </div>
                  </div>
                </div>
                <div class="border-block"></div>
                <!-- <div class="heading-field">Service request information</div> -->
                <!-- Permanent Disconnection -->
                <div
                  class="border-none"
                  *ngIf="
                    requestServicesFrm.value.serviceRequestType ==
                    'Permanent Disconnection Request'
                  "
                >
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleFormControlSelect1"
                          >Enclosed Identification Document<span class="red"
                            >*</span
                          ></label
                        >
                        <select
                          required
                          formControlName="enclosedIdentificationDocument"
                          name="enclosedIdentificationDocument"
                          class="form-control"
                          *ngIf="
                            !servReqEnclosedIdentifDocLoder &&
                            servReqEnclosedIdentifDocs.length > 0
                          "
                          id="exampleFormControlSelect1"
                        >
                          <option value=""
                            >Select Enclosed Identification Document</option
                          >
                          <option
                            value="{{
                              servReqEnclosedIdentifDoc.enclosed_identification_documents
                            }}"
                            *ngFor="
                              let servReqEnclosedIdentifDoc of servReqEnclosedIdentifDocs
                            "
                            >{{
                              servReqEnclosedIdentifDoc.enclosed_identification_documents
                            }}</option
                          >
                        </select>
                        <div *ngIf="servReqEnclosedIdentifDocLoder">
                          Loding...
                        </div>
                        <div
                          *ngIf="
                            f.enclosedIdentificationDocument.touched &&
                            f.enclosedIdentificationDocument.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="
                              f.enclosedIdentificationDocument.errors?.required
                            "
                            >Enclosed Identification Document is required.</span
                          >
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Comments<span class="red">*</span></label
                        >
                        <textarea
                          required
                          formControlName="comments"
                          name="comments"
                          class="form-control"
                          id="exampleFormControlTextarea1"
                          rows="6"
                          placeholder="Add comments here"
                        ></textarea>
                        <div *ngIf="f.comments.touched && f.comments.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.comments.errors?.required"
                            >Comments is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Permanent Disconnection Ends Here -->
                <!-- Load Change Request -->
                <div
                  class="border-none"
                  *ngIf="
                    requestServicesFrm.value.serviceRequestType ==
                    'Load Change Request'
                  "
                >
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Load Unit
                          <!-- <span class="red">*</span> --></label
                        >
                        <input
                          type="text"
                          required
                          formControlName="loadUnit"
                          name="loadUnit"
                          class="form-control"
                          id="exampleInputEmail1"
                          placeholder="Load Unit"
                        />
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >New Load<span class="red">*</span></label
                        >
                        <input
                          type="text"
                          required
                          formControlName="newLoad"
                          name="newLoad"
                          class="form-control"
                          id="exampleInputEmail1"
                          placeholder="New Load"
                        />
                        <div *ngIf="f.newLoad.touched && f.newLoad.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.newLoad.errors?.required"
                            >New Load is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 hidden-xs"></div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Comments<span class="red">*</span></label
                        >
                        <textarea
                          required
                          formControlName="comments"
                          name="comments"
                          class="form-control"
                          id="exampleFormControlTextarea1"
                          rows="6"
                          placeholder="Add comments here"
                        ></textarea>
                        <div *ngIf="f.comments.touched && f.comments.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.comments.errors?.required"
                            >Comments is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Load Change Request Ends Here -->
                <!-- Category Change Request -->
                <div
                  class="border-none"
                  *ngIf="
                    requestServicesFrm.value.serviceRequestType ==
                    'Category Change Request'
                  "
                >
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Proposed Category<span class="red">*</span></label
                        >
                        <input
                          type="text"
                          required
                          formControlName="proposedCategory"
                          name="proposedCategory"
                          class="form-control"
                          placeholder="Enter proposed category"
                        />
                        <div
                          *ngIf="
                            f.proposedCategory.touched &&
                            f.proposedCategory.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="f.proposedCategory.errors?.required"
                            >Proposed Category is required.</span
                          >
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleFormControlSelect1"
                          >Reason<span class="red">*</span></label
                        >
                        <select
                          *ngIf="
                            !ChangeReasonsLoder && changeReasons.length > 0
                          "
                          required
                          formControlName="reason"
                          name="reason"
                          class="form-control"
                          id="exampleFormControlSelect1"
                        >
                          <option value="" selected>Select Reason</option>
                          <option
                            value="{{ changeReason.reason }}"
                            *ngFor="let changeReason of changeReasons"
                            >{{ changeReason.reason }}</option
                          >
                        </select>
                        <div *ngIf="ChangeReasonsLoder">Loding...</div>
                        <div *ngIf="f.reason.touched && f.reason.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.reason.errors?.required"
                            >Reason is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Proposed Supply Code<span class="red">*</span></label
                        >
                        <input
                          required
                          formControlName="proposedSupplyCode"
                          name="proposedSupplyCode"
                          type="text"
                          class="form-control"
                          id="exampleInputEmail1"
                          placeholder="Enter proposed supply code"
                        />
                        <div
                          *ngIf="
                            f.proposedSupplyCode.touched &&
                            f.proposedSupplyCode.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="f.proposedSupplyCode.errors?.required"
                            >Proposed Supply Code is required.</span
                          >
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Comments<span class="red">*</span></label
                        >
                        <textarea
                          type="text"
                          required
                          formControlName="comments"
                          name="comments"
                          class="form-control"
                          id="exampleFormControlTextarea1"
                          rows="6"
                          placeholder="Add comments here"
                        ></textarea>
                        <div *ngIf="f.comments.touched && f.comments.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.comments.errors?.required"
                            >Comments is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Category Change Request Ends here -->
                <!-- Shifting of Meter -->
                <div
                  class="border-none"
                  *ngIf="
                    requestServicesFrm.value.serviceRequestType ==
                      'Shifting of Meter' ||
                    requestServicesFrm.value.serviceRequestType ==
                      'Meter Testing'
                  "
                >
                  <div class="row">
                    <!-- <div class="col-lg-6 col-sm-6 hidden-xs"></div> -->
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Comments<span class="red">*</span></label
                        >
                        <textarea
                          type="text"
                          required
                          formControlName="comments"
                          name="comments"
                          class="form-control"
                          id="exampleFormControlTextarea1"
                          rows="6"
                          placeholder="Add comments here"
                        ></textarea>
                        <div *ngIf="f.comments.touched && f.comments.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.comments.errors?.required"
                            >Comments is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Shifting of Meter Ends here -->
                <!-- Transfer of Connection -->
                <div
                  class="border-none"
                  *ngIf="
                    requestServicesFrm.value.serviceRequestType ==
                    'Transfer of Connection'
                  "
                >
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Applicant Name<span class="red">*</span></label
                        >
                        <input
                          type="text"
                          required
                          formControlName="applicantName"
                          name="applicantName"
                          class="form-control"
                          placeholder="Applicant Name"
                        />
                        <div
                          *ngIf="
                            f.applicantName.touched && f.applicantName.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="f.applicantName.errors?.required"
                            >Applicant Name is required.</span
                          >
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleFormControlSelect1"
                          >Enclosed Identification Document<span class="red"
                            >*</span
                          ></label
                        >
                        <select
                          required
                          formControlName="enclosedIdentificationDocument"
                          name="enclosedIdentificationDocument"
                          class="form-control"
                          *ngIf="
                            !servReqEnclosedIdentifDocLoder &&
                            servReqEnclosedIdentifDocs.length > 0
                          "
                          id="exampleFormControlSelect1"
                        >
                          <option value=""
                            >Select Enclosed Identification Document</option
                          >
                          <option
                            value="{{
                              servReqEnclosedIdentifDoc.enclosed_identification_documents
                            }}"
                            *ngFor="
                              let servReqEnclosedIdentifDoc of servReqEnclosedIdentifDocs
                            "
                            >{{
                              servReqEnclosedIdentifDoc.enclosed_identification_documents
                            }}</option
                          >
                        </select>
                        <div *ngIf="servReqEnclosedIdentifDocLoder">
                          Loding...
                        </div>
                        <div
                          *ngIf="
                            f.enclosedIdentificationDocument.touched &&
                            f.enclosedIdentificationDocument.invalid
                          "
                        >
                          <span
                            class="error-msg"
                            *ngIf="
                              f.enclosedIdentificationDocument.errors?.required
                            "
                            >Enclosed Identification Document is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >House Number<span class="red">*</span></label
                        >
                        <input
                          required
                          type="text"
                          formControlName="houseNumber"
                          name="houseNumber"
                          class="form-control"
                          id="exampleInputEmail1"
                          placeholder="Enter House Number"
                        />
                        <div
                          *ngIf="f.houseNumber.touched && f.houseNumber.invalid"
                        >
                          <span
                            class="error-msg"
                            *ngIf="f.houseNumber.errors?.required"
                            >House Number is required.</span
                          >
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-sm-6 col-xs-12">
                      <div class="form-group">
                        <label for="exampleInputEmail1"
                          >Comments<span class="red">*</span></label
                        >
                        <textarea
                          type="text"
                          required
                          formControlName="comments"
                          name="comments"
                          class="form-control"
                          id="exampleFormControlTextarea1"
                          rows="6"
                          placeholder="Add comments here"
                        ></textarea>
                        <div *ngIf="f.comments.touched && f.comments.invalid">
                          <span
                            class="error-msg"
                            *ngIf="f.comments.errors?.required"
                            >Comments is required.</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Transfer of Connection ends here -->
                <div
                  class="form-group border-none"
                  [ngClass]="{ 'pos-rel': submitServiceRequestLoder }"
                >
                  <div
                    class="spinner"
                    *ngIf="submitServiceRequestLoder"
                    style="top: 80%;"
                  >
                    <div class="bounce1"></div>
                    <div class="bounce2"></div>
                    <div class="bounce3"></div>
                  </div>
                  <button
                    class="btn btn-primary submit-btn"
                    [disabled]="
                      !requestServicesFrm.valid ||
                      submitServiceRequestLoder == true
                    "
                  >
                    Submit
                  </button>
                  <!-- {{requestServicesFrm.value | json}} -->
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class=" margin_top20">
        <div class="electricity-consumption-box">
          <img src="../assets/images/electricity-icon.png" /> Your last month
          consumption is <span>3250</span> units. Learn tips how to save
          electricity.
          <a href="#"
            >Read more <img src="../assets/images/read-more-icon.png"
          /></a>
        </div>
      </div>
      <ul class="dash-box-list">
        <li class="dash-box-li rows offer-li no-padding">
          <div class="offer-section">
            <div class="offer-content">
              <img src="../assets/images/offer-icon.png" alt="" />
              <div class="text-content">
                We have a lot more to <a href="#">OFFER</a>. Choose from a wide
                range of products
              </div>
              <a class="blue-btn" href="#">Explore</a>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div id="main-menu-bg"></div>
  </div>
  <app-footer></app-footer>
</div>
